<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Consulta los detalles de tu cita en Uriangato Style. Fecha, hora, servicio y costo de tu reserva.">
    <meta name="keywords" content="consulta cita, sal√≥n de belleza, reserva, detalles de cita">
    <meta name="author" content="Uriangato Style">
    <title>Consulta tu Cita | Uriangato Style</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <nav>
        <h1 class="playfair">URIANGATO STYLE</h1>
        <ul>
            <li><a href="index.html" class="playfair-nav">Inicio</a></li>
            <li><a href="reservaciones.html" class="playfair-nav">Reserva Online</a></li>
            <li><a href="promociones.html" class="playfair-nav">Promociones</a></li>
            <li><a href="datosCita.html" class="playfair-nav">Datos de tu cita</a></li>
            <li><a href="conocenos.html" class="playfair-nav">Con√≥cenos</a></li>
        </ul>
    </nav>

    <div class="container">
        <h2 class="poppins">Consulta los detalles de tu cita</h2>
        <p class="solicitud poppins">Ingresa tu n√∫mero de cita para ver los detalles</p>
        
        <div class="search-box">
            <input type="text" id="codigoCita" placeholder="Ingresa tu c√≥digo de cita" maxlength="5">
            <button class="search-button" onclick="buscarCita()">üîç Buscar</button>
        </div>

        <div class="appointment-details">
            <div class="left">
                <p><strong>Fecha:</strong> <span id="fecha"></span></p>
                <p><strong>Cliente:</strong> <span id="cliente"></span></p>
                <p><strong>Ubicaci√≥n:</strong> <span id="ubicacion"></span></p>
            </div>
            <div class="right">
                <p><strong>Hora:</strong> <span id="hora"></span></p>
                <p><strong>Servicio:</strong> <span id="servicio"></span></p>
                <p><strong>Costo:</strong> <span id="costo"></span></p>
            </div>
        </div>

        <button class="cancel-button" onclick="cancelarCita()">Cancelar Cita</button>
    </div>

    <footer>
        <div class="footer-icons">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="0.75">
                <path
                    d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z">
                </path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="0.75">
                <path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"></path>
                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                <path d="M16.5 7.5l0 .01"></path>
            </svg>
        </div>
        <p><a href="politica.html" class="playfair-nav">Pol√≠tica de privacidad</a> | <a href="terminos.html">T√©rminos y
                condiciones</a></p>
        <p class="playfair-nav">¬© 2025 para Uriangato Style</p>
    </footer>

    <script>
        function buscarCita() {
            var codigo = document.getElementById("codigoCita").value;
            var regex = /^\d{5}$/; // Validar que sean exactamente 5 d√≠gitos num√©ricos

            if (!regex.test(codigo)) {
                alert("Por favor, ingresa un c√≥digo v√°lido de 5 n√∫meros.");
                return;
            }

            // Datos predefinidos de la cita (puedes cambiar estos valores)
            document.getElementById("fecha").innerText = "15 de Marzo de 2025";
            document.getElementById("cliente").innerText = "Juan P√©rez";
            document.getElementById("ubicacion").innerText = "Sucursal Centro";
            document.getElementById("hora").innerText = "10:30 AM";
            document.getElementById("servicio").innerText = "Corte de Cabello";
            document.getElementById("costo").innerText = "$200.00";

            alert("Cita encontrada con √©xito.");
        }

    function cancelarCita() {
        // Limpiar los detalles de la cita
        document.getElementById("fecha").innerText = "";
        document.getElementById("cliente").innerText = "";
        document.getElementById("ubicacion").innerText = "";
        document.getElementById("hora").innerText = "";
        document.getElementById("servicio").innerText = "";
        document.getElementById("costo").innerText = "";

        // Mostrar mensaje de cita cancelada
        alert("Cita cancelada");
    }

    function buscarCita() {
        var codigo = document.getElementById("codigoCita").value;
        var regex = /^[A-Z0-9]{5}$/; // Validar que sean 5 caracteres alfanum√©ricos

        if (!regex.test(codigo)) {
            alert("Por favor, ingresa un c√≥digo v√°lido de 5 caracteres alfanum√©ricos.");
            return;
        }

        fetch("server/database.php", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: "codigo=" + encodeURIComponent(codigo)
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                document.getElementById("fecha").innerText = data.fecha;
                document.getElementById("hora").innerText = data.hora;
                document.getElementById("cliente").innerText = data.cliente;
                document.getElementById("ubicacion").innerText = data.ubicacion;
                document.getElementById("servicio").innerText = data.servicio;
                document.getElementById("costo").innerText = data.costo;
                alert("Cita encontrada con √©xito.");
            } else {
                alert(data.message);
                limpiarCampos();
            }
        })
        .catch(error => {
            console.error("Error:", error);
            alert("Hubo un problema al buscar la cita.");
            limpiarCampos();
        });
    }

    // Funci√≥n para limpiar los campos si no se encuentra una cita
    function limpiarCampos() {
        document.getElementById("fecha").innerText = "";
        document.getElementById("hora").innerText = "";
        document.getElementById("cliente").innerText = "";
        document.getElementById("ubicacion").innerText = "";
        document.getElementById("servicio").innerText = "";
        document.getElementById("costo").innerText = "";
    }

    </script>
</body>

</html>
